(()=>{"use strict";function e(e){e.classList.remove("popup_opened")}function t(e){e.classList.add("popup_opened")}function n(e,n,o){!function(e,t){e.addEventListener("click",(function(){t.reset()}))}(e,o),function(e,n){e.addEventListener("click",(function(){t(n)}))}(e,n)}function o(e,n,o,r){var i,c,u=function(e,t){var n=t.querySelector(".element").cloneNode(!0),o=n.querySelector(".element__image");return o.src=e.link,o.alt=e.title,n.querySelector(".element__title").textContent=e.title,n}(e,n);(i=u.querySelector(".element__like-button")).addEventListener("click",(function(){i.classList.toggle("element__like-button_enabled")})),(c=u.querySelector(".element__remove-button")).addEventListener("click",(function(){c.parentElement.remove()})),function(e,n){e.addEventListener("click",(function(){var o=n.querySelector(".popup__image"),r=n.querySelector(".popup__image-description");o.src=e.src,o.alt=e.alt,r.textContent=e.alt,t(n)}))}(u.querySelector(".element__image"),r),o.prepend(u)}function r(e,t,n){var o,r=t.querySelector(e.submitButtonSelector);o=n,Array.from(o).some((function(e){return!e.validity.valid}))?(r.classList.add(e.inactiveButtonClass),r.disabled=!0):(r.classList.remove(e.inactiveButtonClass),r.disabled=!1)}var i,c,u,l,a,s,p=document.querySelector(".profile__edit-button"),d=document.querySelector(".popup_action_edit-profile"),m=document.forms["edit-profile"],f=document.querySelector(".profile__name"),_=document.querySelector(".profile__description"),v=document.querySelector(".profile__add-button"),y=document.querySelector(".popup_action_add-image"),S=document.forms["add-image"],k=document.querySelectorAll(".popup"),E=document.querySelectorAll(".popup, .popup__close-button"),b=document.querySelectorAll(".popup__container, .popup__figure"),q=document.querySelector(".popup_action_preview"),g=document.forms["add-image"],L=document.querySelector(".template-element").content,h=document.querySelector(".elements"),x=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].map((function(e){return{title:e.name,link:e.link}}));x.forEach((function(e){o(e,L,h,q)})),n(v,y,S),u=f,l=_,n(i=p,d,c=m),function(e,t,n,o){e.addEventListener("click",(function(){t.name.value=n.textContent,t.description.value=o.textContent}))}(i,c,u,l),b.forEach((function(e){e.addEventListener("click",(function(e){e.stopPropagation()}))})),a=k,document.body.addEventListener("keyup",(function(t){"Escape"===t.key&&a.forEach((function(t){e(t)}))})),function(t,n){t.forEach((function(t){t.addEventListener("click",(function(){return function(t){t.forEach((function(t){e(t)}))}(n)}))}))}(E,k),function(t,n,o){t.addEventListener("submit",(function(r){n.textContent=t.name.value,o.textContent=t.description.value,e(t.offsetParent),r.preventDefault(),t.reset()}))}(m,f,_),function(t,n,r,i,c){t.addEventListener("submit",(function(u){n.title=t.title.value,n.link=t.link.value,o(n,r,i,c),e(t.offsetParent),u.preventDefault(),t.reset()}))}(g,{},L,h,q),s={formSelector:".popup__container",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__field-error"},document.querySelectorAll(s.formSelector).forEach((function(e){!function(e,t){var n=e.querySelectorAll(t.inputSelector);r(t,e,n),n.forEach((function(o){o.addEventListener("input",(function(){!function(e,t){t.validity.valid?function(e,t){var n=t.nextElementSibling;t.classList.remove(e.inputErrorClass),n.textContent=""}(e,t):function(e,t,n){var o=t.nextElementSibling;t.classList.add(e.inputErrorClass),o.textContent=n.slice(0,35)}(e,t,t.validationMessage)}(t,o),r(t,e,n)}))}))}(e,s)}))})();